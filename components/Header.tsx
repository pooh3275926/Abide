import React, { useState } from 'react';

interface HeaderProps {
  title: string;
}

const dailyVerses = [
  "詩篇 23:1 — 耶和華是我的牧者，我必不至缺乏。",
  "腓立比書 4:6-7 — 應當一無掛慮，只要凡事藉著禱告、祈求和感謝，將你們所要的告訴神。神所賜出人意外的平安，必在基督耶穌裡保守你們的心懷意念。",
  "以賽亞書 41:10 — 你不要害怕，因為我與你同在；不要驚惶，因為我是你的神。我必堅固你，我必幫助你，我必用公義的右手扶持你。",
  "馬太福音 11:28 — 凡勞苦擔重擔的人可以到我這裡來，我就使你們得安息。",
  "羅馬書 8:28 — 我們曉得萬事都互相效力，叫愛神的人得益處，就是按祂旨意被召的人。",
  "約書亞記 1:9 — 你當剛強壯膽，不要懼怕，也不要驚惶，因為無論你往哪裡去，耶和華你的神必與你同在。",
  "詩篇 46:1 — 神是我們的避難所，是我們的力量，是我們在患難中隨時的幫助。",
  "耶利米哀歌 3:22-23 — 我們不致消滅，是出於耶和華諸般的慈愛；祂的憐憫不致斷絕。每早晨這都是新的；祢的誠實極其廣大。",
  "哥林多後書 12:9 — 我的恩典夠你用的，因為我的能力是在人的軟弱上顯得完全。",
  "詩篇 34:18 — 耶和華靠近傷心的人，拯救靈性痛悔的人。",
  "約翰福音 14:27 — 我留下平安給你們；我將我的平安賜給你們。我所賜的，不像世人所賜的。你們心裡不要憂愁，也不要膽怯。",
  "箴言 3:5-6 — 你要專心仰賴耶和華，不可倚靠自己的聰明。在你一切所行的事上都要認定祂，祂必指引你的路。",
  "以賽亞書 40:31 — 但那等候耶和華的，必重新得力。他們必如鷹展翅上騰；他們奔跑卻不困倦，行走卻不疲乏。",
  "羅馬書 15:13 — 但願使人有盼望的神，因信將諸般的喜樂平安充滿你們的心，使你們藉著聖靈的能力大有盼望。",
  "詩篇 91:1-2 — 住在至高者隱密處的，必住在全能者的蔭下。我要論到耶和華說：祂是我的避難所，是我的山寨，是我的神，是我所倚靠的。",
  "約翰一書 4:18 — 愛裡沒有懼怕；愛既完全，就把懼怕除去。",
  "詩篇 121:1-2 — 我要向山舉目。我的幫助從何而來？我的幫助從造天地的耶和華而來。",
  "以賽亞書 43:2 — 你從水中經過，我必與你同在；你趟過江河，水必不漫過你；你從火中行過，必不被燒，火焰也不著在你身上。",
  "詩篇 27:1 — 耶和華是我的亮光，是我的拯救，我還怕誰呢？耶和華是我性命的保障，我還懼誰呢？",
  "希伯來書 13:5 — 我總不撇下你，也不丟棄你。",
  "約翰福音 16:33 — 在世上你們有苦難，但你們可以放心，我已經勝了世界。",
  "哥林多前書 10:13 — 你們所遇見的試探，無非是人所能受的。神是信實的，必不叫你們受試探過於所能受的。",
  "詩篇 37:4 — 又要以耶和華為樂，祂就將你心裡所求的賜給你。",
  "以弗所書 3:20 — 神能照著運行在我們心裡的大力，充充足足地成就一切，超過我們所求所想的。",
  "約翰福音 3:16 — 神愛世人，甚至將祂的獨生子賜給他們，叫一切信祂的，不致滅亡，反得永生。",
  "詩篇 55:22 — 你要把你的重擔卸給耶和華，祂必撫養你；祂永不叫義人動搖。",
  "馬可福音 9:23 — 在信的人，凡事都能。",
  "哥林多後書 5:17 — 若有人在基督裡，他就是新造的人，舊事已過，都變成新的了。",
  "詩篇 30:5 — 一宿雖然有哭泣，早晨便必歡呼。",
  "啟示錄 21:4 — 神要擦去他們一切的眼淚；不再有死亡，也不再有悲哀、哭號、疼痛。",
  "詩篇 139:23-24 — 神啊，求你鑒察我，知道我的心思；試煉我，知道我的意念。看在我裡面有甚麼惡行沒有，引導我走永生的道路。",
  "以賽亞書 26:3 — 堅心倚賴你的，你必保守他十分平安，因為他倚靠你。",
  "約翰一書 1:9 — 我們若認自己的罪，神是信實的，是公義的，必要赦免我們的罪，洗淨我們一切的不義。",
  "詩篇 32:7 — 你是我藏身之處；你必保佑我脫離苦難，以得救的樂歌四面環繞我。",
  "馬太福音 6:33 — 你們要先求他的國和他的義，這些東西都要加給你們了。",
  "詩篇 103:2-4 — 我的心哪，你要稱頌耶和華，不可忘記他的一切恩惠。他赦免你的一切罪孽，醫治你的一切疾病，救贖你的命脫離死亡。",
  "羅馬書 5:8 — 惟有基督在我們還作罪人的時候為我們死，神的愛就在此向我們顯明了。",
  "詩篇 18:2 — 耶和華是我的岩石，我的山寨，我的救主，我的神，我所投靠的磐石。",
  "雅各書 1:5 — 你們中間若有缺少智慧的，應當求那厚賜與眾人、也不斥責人的神，主就必賜給他。",
  "詩篇 16:8 — 我將耶和華常擺在我面前，因他在我右邊，我便不致搖動。",
  "彼得前書 5:7 — 你們要將一切的憂慮卸給神，因為他顧念你們。",
  "詩篇 19:14 — 耶和華—我的磐石、我的救贖主啊，願我口中的言語、心裡的意念在你面前蒙悅納。",
  "哥林多後書 4:17 — 我們這至暫至輕的苦楚，要為我們成就極重無比、永遠的榮耀。",
  "約翰福音 15:5 — 我是葡萄樹，你們是枝子；常在我裡面的，我也常在他裡面，這人就多結果子。",
  "羅馬書 12:12 — 在指望中要喜樂，在患難中要忍耐，禱告要恆切。",
  "詩篇 119:105 — 你的話是我腳前的燈，是我路上的光。",
  "申命記 31:6 — 你們要剛強壯膽，不要害怕，也不要畏懼他們，因為耶和華你的神必與你同去；祂必不撇下你，也不丟棄你。",
  "詩篇 31:24 — 凡等候耶和華的人，你們都要壯膽，堅固你們的心。",
  "以賽亞書 12:2 — 看哪，神是我的拯救；我要倚靠祂，並不懼怕；因為主耶和華是我的力量，是我的詩歌，也成了我的拯救。",
  "詩篇 118:14 — 耶和華是我的力量，是我的詩歌，也成了我的拯救。",
  "詩篇 37:5 — 將你的道路交託耶和華，並倚靠他，他就必成全。",
  "以賽亞書 54:17 — 凡指向你造的舌頭，必不能得勝；凡興起攻擊你的，必定失敗。",
  "詩篇 62:1 — 我的心哪，你當默默無聲，專等候神；因我盼望的是祂。",
  "以賽亞書 30:15 — 主耶和華說，得救在乎歸回安息，在乎平靜信靠。",
  "詩篇 40:1 — 我要耐心等候耶和華；祂垂聽了我的呼求，將我從險境中提拔。",
  "詩篇 71:5 — 因你是我的盼望、我的力量，自幼你是我的依靠。",
  "箴言 18:10 — 耶和華的名是堅固臺，義人奔入便得安穩。",
  "詩篇 23:4 — 我雖然行過死蔭的幽谷，也不怕遭害，因為你與我同在；你的杖，你的竿，都安慰我。",
  "詩篇 34:4 — 我尋求耶和華，他就應允我，救我脫離一切的恐懼。",
  "詩篇 46:10 — 你們要休息，要知道我是神；我必在萬國中被尊崇，在遍地上也被尊崇。",
  "詩篇 56:3 — 我懼怕的時候，要倚靠你。",
  "以賽亞書 49:16 — 我將你銘刻在我手掌上；你的牆垣常在我眼前。",
  "詩篇 84:11 — 耶和華神是日頭，是盾牌，賜下恩典和榮耀，未曾留下一樣好處給行事正直的人。",
  "耶利米書 29:11 — 我知道我向你們所懷的意念，是賜平安的意念，不是降災禍的意念，要給你們一個將來和盼望。",
  "詩篇 119:114 — 你是我藏身之處，我必永遠仰望你的話。",
  "馬太福音 19:26 — 在人這是不能的，在神凡事都能。",
  "詩篇 33:20 — 我們的心仰望耶和華，他是我們的幫助和盾牌。",
  "箴言 16:3 — 將你所作的交託耶和華，你的計謀就必成立。",
  "詩篇 9:10 — 那認識你名的人必倚靠你，因你未曾離棄尋求你的人。",
  "約翰福音 8:32 — 你們必曉得真理，真理必叫你們得以自由。",
  "詩篇 121:7 — 耶和華必保護你，免受一切的災害；祂要保護你的性命。",
  "箴言 4:23 — 你要保守你心，勝過保守一切，因為一生的果效是由心發出。",
  "詩篇 119:50 — 這話曾安慰我，使我因患難得活。",
  "以賽亞書 55:12 — 你們必歡喜而出，平安蒙引導；大地也必在你們面前歡呼。",
  "羅馬書 8:31 — 神若幫助我們，誰能抵擋我們呢？",
  "詩篇 16:11 — 你必將生命的道路指示我，在你面前有滿足的喜樂，在你右手中有永遠的福樂。",
  "希伯來書 11:1 — 信就是所望之事的實底，是未見之事的確據。",
  "以弗所書 6:10 — 最後，你們要靠著主的大能大力，作剛強的人。",
  "以弗所書 6:11 — 要穿戴神所賜的全副軍裝，就能抵擋魔鬼的詭計。",
  "以弗所書 6:12 — 因我們並不是與屬血氣的爭戰，而是與那些執政的、掌權的、管轄這幽暗世界的，以及天空屬靈氣的惡魔爭戰。",
  "以弗所書 6:13 — 所以要拿起神所賜的全副軍裝，好在邪惡的日子抵擋得住，並且成就了一切，站立得穩。",
  "以弗所書 6:14 — 所以要站立得穩，用真理當作帶子束腰，用公義當作護心鏡護心；",
  "以弗所書 6:15 — 又用和平的福音當作預備走路的鞋穿在腳上；",
  "以弗所書 6:16 — 此外，拿著信德當作藤牌，可以滅盡那惡者一切的火箭；",
  "以弗所書 6:17 — 又戴上救恩的頭盔，拿著聖靈的寶劍，就是神的道；",
  "以弗所書 6:18 — 靈裡要隨時靠著各樣的禱告祈求，並要在此警醒不倦，為眾聖徒祈求。",
  "詩篇 145:18 — 凡求告耶和華的，就是誠心求告他的，耶和華便與他相近。",
  "歌林多後書 9:8 — 神能將各樣的恩惠多多地加給你們，使你們凡事常常充足，能多行各樣善事。",
  "詩篇 100:5 — 因為耶和華本為善；他的慈愛存到永遠，他的信實直到萬代。",
  "詩篇 46:2 — 神是我們的避難所和力量，是我們隨時的幫助。",
  "箴言 3:1-2 — 我兒，不要忘記我的法則，你心要謹守我的誡命，因這必使你延年益壽，平安加增。",
  "以賽亞書 50:7 — 因主耶和華必幫助我，所以我不慚愧；我硬著臉面如磐石，我知道必不蒙羞。",
  "詩篇 27:14 — 你當等候耶和華，壯膽，堅固你的心；我再說，你當等候耶和華！",
  "耶利米書 33:3 — 你求告我，我就應允你，將你所不知道、又大又難的事指示你。",
  "詩篇 34:19 — 義人多有苦難，但耶和華救他脫離這一切。",
  "箴言 16:9 — 人心籌算自己的道路；惟耶和華指引他的腳步。",
  "以賽亞書 41:13 — 因我耶和華你的神必握住你的右手，對你說：不要害怕，我必幫助你。",
  "詩篇 112:7 — 他心裡堅定，不怕遇見禍患。",
  "羅馬書 8:37 — 然而靠著愛我們的主，在這一切事上已經得勝有餘。",
  "詩篇 145:9 — 耶和華對一切所造的都是慈愛，他的恩惠覆庇萬有。"
];

// 👉 新增：本地隨機抽經文
const getRandomVerse = () => {
  const randomIndex = Math.floor(Math.random() * dailyVerses.length);
  return dailyVerses[randomIndex];
};

const Header: React.FC<HeaderProps> = ({ title }) => {
  const initialVerse = dailyVerses[new Date().getDate() % dailyVerses.length];
  const [currentVerse, setCurrentVerse] = useState(initialVerse);
  const [isGeneratingVerse, setIsGeneratingVerse] = useState(false);

  // 👉 改成直接從本地陣列抽
  const handleGenerateVerse = () => {
    setIsGeneratingVerse(true);
    setTimeout(() => {
      const newVerse = getRandomVerse();
      setCurrentVerse(newVerse);
      setIsGeneratingVerse(false);
    }, 400); // 小延遲讓按鈕動畫更自然
  };

  const handleScrollToTop = () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth',
    });
  };

  return (
    <header className="fixed top-0 left-0 right-0 z-10 p-4 bg-beige-200/80 backdrop-blur-sm shadow-md text-center">
      <div className="flex justify-between items-center">
        <button
          onClick={handleGenerateVerse}
          disabled={isGeneratingVerse}
          className="flex items-center gap-2 px-3 py-2 rounded-full bg-beige-300 focus:outline-none focus:ring-2 focus:ring-gold-DEFAULT disabled:opacity-50"
          aria-label="Generate a new random verse"
        >
          <span>{isGeneratingVerse ? '↻' : '↻'}</span>
        </button>
        <h1 className="text-xl font-bold text-gold-dark">{title}</h1>
        <button
          onClick={handleScrollToTop}
          className="p-2 w-10 h-10 flex items-center justify-center rounded-full bg-beige-300 focus:outline-none focus:ring-0 active:outline-none"
          aria-label="Scroll to top"
        >
          {'▲'}
        </button>
      </div>
      <p className="mt-4 text-xs text-gray-600 mt-1 italic truncate" title={currentVerse}>
        {currentVerse}
      </p>
    </header>
  );
};


export default Header;



